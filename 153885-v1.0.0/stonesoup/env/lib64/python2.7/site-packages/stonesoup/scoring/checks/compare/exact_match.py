# -----------------------------Copyright-------------------------------------
# NOTICE
#
# This software (or technical data) was produced for the U. S.
# Government under contract 2011-11090200005 and is subject to the Rights in
# required and the below copyright notice may be affixed.
#
# Copyright (c) 2014. All Rights Reserved.
# -----------------------------Copyright--------------------------------------
'''
Created on Apr 1, 2014

@author: Aryeh
'''
import filecmp
import os

from stonesoup.scoring.checks.compare.base import Base_Compare_Operation
from stonesoup.metadata import EncodingType

class Exact_Match(Base_Compare_Operation):

    def __init__(self, metadata, check):
        super(Exact_Match, self).__init__(metadata, check)

    def score(self):
        expected_file = None
        actual_file = None

        if self.expected_encoding == EncodingType.base64 or self.actual_encoding == EncodingType.base64:
            expected_file = self._expected.get_file(EncodingType.base64)
            actual_file = self._actual.get_file(EncodingType.base64)
        else:
            expected_file = self._expected.get_file()
            actual_file = self._actual.get_file()


        result = filecmp.cmp(actual_file, expected_file)
        filecmp._cache.clear()
        return result

